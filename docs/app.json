[{"name":"app.R","content":"# Load the Shiny package\r\nlibrary(shiny)\r\n\r\n# Define the UI (User Interface)\r\nui <- fluidPage(\r\n  titlePanel(\"Dosing calculator\"),\r\n\r\n  sidebarLayout(\r\n    sidebarPanel(\r\n      title= \"aaa\",\r\n      numericInput(\"pH\", \"pH\", value = 7, min = 1, max = 14),\r\n      numericInput(\"dry\", \"Drymatter g/L\", value = 0, min = 0, max = 100),\r\n      numericInput(\"temp\", \"Storage temperature (Celsius)\", value = 12, min = 0, max = 50),\r\n      numericInput(\"urea\", \"Applied Urea (kg/m^3)\", value = 1, min = 0, max = 100),\r\n      numericInput(\"n_target\", \"Nitrogen target in the soil (kg/ha)\", value = 60, min = 0, max = 100),\r\n      numericInput(\"va_vol\", \"VA Volume (m3)\", value = 1000, min = 0, max = 10000),\r\n    ),\r\n\r\n    mainPanel(\r\n      # Display table output\r\n      #tableOutput(\"resultTable\")\r\n      h4(\"Duration of treatment in days:\"),\r\n      div(\r\n        textOutput(\"duration\"),\r\n        style = \"font-size: 16px; font-weight: bold; color: #2E86C1;\"\r\n      ),\r\n      h4(\"Application rate (m^3/ha):\"),\r\n      div(\r\n        textOutput(\"application\"),\r\n        style = \"font-size: 16px; font-weight: bold; color: #2E86C1;\"\r\n      ),\r\n      h4(\"Land extension (ha):\"),\r\n      div(\r\n        textOutput(\"land\"),\r\n        style = \"font-size: 16px; font-weight: bold; color: #2E86C1;\"\r\n      ),\r\n\r\n\r\n      # div(\r\n      #  tableOutput(\"resultTable\"),\r\n      #style = \"font-size: 16px; font-weight: bold; color: #2E86C1;\"\r\n      #),\r\n      # Download button\r\n      downloadButton(\"downloadData\", \"Download Table as CSV\")\r\n\r\n    )\r\n  )\r\n)\r\n\r\n# Define the Server logic\r\nserver <- function(input, output) {\r\n\r\n  # Reactive expression to calculate C and D based on inputs A and B\r\n  result <- reactive({\r\n    pKa<- (2729.92/(input$temp+273.15))+0.090181\r\n    f_nh3<- 1/(10^(pKa-input$temp)+1)\r\n    TAN <- (input$dry*0.145+input$urea*0.466)\r\n    NH3aq <- TAN*f_nh3\r\n    duration <- -5/(-0.8*((TAN/14.01)*1000)*0.0037*exp(0.066*input$temp))\r\n    C_n <- input$dry *0.171 + input$urea *0.466\r\n    application <- input$n_target/C_n\r\n    land <- input$va_vol/application\r\n\r\n    # Create a data frame to store the values\r\n    data.frame(pKa = round(pKa,1),\r\n               f_nh3 = round(f_nh3,1),\r\n               TAN = round(TAN,1),\r\n               NH3aq = round(NH3aq,1),\r\n               duration = round(duration,1),\r\n               C_n=C_n,application= round(application,1),\r\n               land=round(land,1))\r\n  })\r\n\r\n  # Render the table on the UI\r\n  output$resultTable <- renderTable({\r\n    result()\r\n  })\r\n\r\n  output$duration <- renderText({\r\n    result()$duration\r\n  })\r\n\r\n  output$application <- renderText({\r\n    result()$application\r\n  })\r\n\r\n  output$land <- renderText({\r\n    result()$land\r\n  })\r\n\r\n  # Allow the user to download the table as a CSV file\r\n  output$downloadData <- downloadHandler(\r\n    filename = function() {\r\n      paste(\"results\", Sys.Date(), \".csv\", sep = \"\")\r\n    },\r\n    content = function(file) {\r\n      write.csv(result(), file, row.names = FALSE)\r\n    }\r\n  )\r\n}\r\n\r\n# Run the app\r\nshinyApp(ui = ui, server = server)\r\n","type":"text"},{"name":"shiny_to_git.Rproj","content":"Version: 1.0\r\n\r\nRestoreWorkspace: Default\r\nSaveWorkspace: Default\r\nAlwaysSaveHistory: Default\r\n\r\nEnableCodeIndexing: Yes\r\nUseSpacesForTab: Yes\r\nNumSpacesForTab: 2\r\nEncoding: UTF-8\r\n\r\nRnwWeave: Sweave\r\nLaTeX: pdfLaTeX\r\n\r\nAutoAppendNewline: Yes\r\nStripTrailingWhitespace: Yes\r\n","type":"text"}]
